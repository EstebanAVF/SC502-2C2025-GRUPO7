<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V√≠asSeguras - Reporte de Incidentes Viales</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="estilos.css">

    <!-- Se utilizar√° OpenStreetMap con Leaflet.js debido a su disponiblidad -->
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    
</head>
<body>
    <!-- Barra navegacion -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-road me-2"></i>V√≠asSeguras
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#inicio">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#mapa">Mapa</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#reportar">Reportar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#estadisticas">Estad√≠sticas</a>
                    </li>
                    <li class="nav-item" id="loginButtonContainer">
                        <a class="btn btn-outline-light ms-2" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Iniciar Sesi√≥n</a>               
                    </li>
                    <li class="nav-item dropdown d-none" id="userProfileContainer">
                        <a class="nav-link dropdown-toggle btn btn-outline-light ms-2" href="#" id="navbarDropdownUser" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-1"></i> <span id="nombreUsuarioDisplay">Usuario</span> </a>
                        <ul class="dropdown-menu dropdown-menu-end custom-dropdown-menu" aria-labelledby="navbarDropdownUser">
                            <li><a class="dropdown-item" id="settingsButton" href="#">Configuraciones</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" id="logoutButton">Cerrar Sesi√≥n</a></li>
                        </ul>              
                     </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Encabezado -->
    <section id="inicio" class="hero-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold mb-4">
                        <i class="fas fa-shield-alt me-3"></i>V√≠asSeguras
                    </h1>
                    <p class="lead mb-4">
                        Plataforma comunitaria para reportar y conocer incidentes viales, zonas de riesgo y condiciones de tr√°fico en tiempo real.
                    </p>
                    <div class="d-grid d-md-flex gap-3 justify-content-center">
                        <a href="#reportar" class="btn btn-danger btn-lg px-4">
                            <i class="fas fa-exclamation-triangle me-2"></i>Reportar Incidente
                        </a>
                        <a href="#mapa" class="btn btn-outline-light btn-lg px-4">
                            <i class="fas fa-map me-2"></i>Ver Mapa
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Este bloque es como el nucleo en donde se encuentran gran parte de las secciones y funciones-->
    <main>
        <div class="container my-5">
            <!-- seccion de caracteristicas -->
            <section class="row">
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <div class="mb-4">
                            <i class="fas fa-map-marked-alt fa-3x text-primary"></i>
                        </div>
                        <h4>Mapa Interactivo</h4>
                        <p class="text-muted">Visualiza incidentes viales, zonas de riesgo y condiciones de tr√°fico en tiempo real en tu √°rea.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <div class="mb-4">
                            <i class="fas fa-users fa-3x text-success"></i>
                        </div>
                        <h4>Reportes Comunitarios</h4>
                        <p class="text-muted">La comunidad reporta y verifica incidentes para mantener la informaci√≥n actualizada.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <div class="mb-4">
                            <i class="fas fa-bell fa-3x text-warning"></i>
                        </div>
                        <h4>Alertas Instant√°neas</h4>
                        <p class="text-muted">Recibe notificaciones sobre incidentes en tu ruta habitual y zonas de inter√©s.</p>
                    </div>
                </div>
            </section>

            <!-- Seccion para el mapa -->
            <section id="mapa" class="my-5">
                <h2 class="text-center text-white mb-4">
                    <i class="fas fa-map me-2"></i>Mapa de Incidentes
                </h2>
                <div class="map-container">
                    <div id="mapid" style="height: 500px; width: 100%; border-radius: 10px;"></div>
                </div>
            </section>

            <!-- Seccion de reportes -->
            <section id="reportar" class="my-5">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <div class="incident-form">
                            <h3 class="mb-4">
                                <i class="fas fa-plus-circle me-2 text-danger"></i>Reportar Incidente
                            </h3>
                            <form action="process_report.php" method="POST" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="incident_type" class="form-label">Tipo de Incidente *</label>
                                        <select class="form-select" id="incident_type" name="incident_type" required>
                                            <option value="">Selecciona el tipo...</option>
                                            <option value="accident">üöó Accidente de Tr√°fico</option>
                                            <option value="congestion">üö¶ Congesti√≥n/Embotellamiento</option>
                                            <option value="construction">üöß Construcci√≥n/Obra</option>
                                            <option value="danger_zone">‚ö†Ô∏è Zona Peligrosa</option>
                                            <option value="wrong_way">‚ÜîÔ∏è V√≠a Mal Se√±alizada</option>
                                            <option value="weather">üåßÔ∏è Condici√≥n Clim√°tica</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="severity" class="form-label">Nivel de Severidad *</label>
                                        <select class="form-select" id="severity" name="severity" required>
                                            <option value="">Selecciona...</option>
                                            <option value="low">üü¢ Bajo</option>
                                            <option value="medium">üü° Medio</option>
                                            <option value="high">üî¥ Alto</option>
                                            <option value="critical">üö® Cr√≠tico</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="location" class="form-label">Ubicaci√≥n *</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="location" name="location" 
                                            placeholder="Ej: Avenida Central, San Jos√©" required>
                                        <button class="btn btn-outline-secondary" type="button" id="get_location">
                                            <i class="fas fa-crosshairs"></i>
                                        </button>
                                    </div>
                                    <div class="form-text">Usa el bot√≥n para obtener tu ubicaci√≥n actual</div>
                                </div>

                                <div class="mb-3">
                                    <label for="description" class="form-label">Descripci√≥n del Incidente *</label>
                                    <textarea class="form-control" id="description" name="description" rows="4" 
                                            placeholder="Describe detalladamente lo que est√° ocurriendo..." required></textarea>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="photo" class="form-label">Fotograf√≠a (Opcional)</label>
                                        <input type="file" class="form-control" id="photo" name="photo" accept="image/*">
                                        <div class="form-text">Ayuda con una foto del incidente</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="contact" class="form-label">Contacto (Opcional)</label>
                                        <input type="text" class="form-control" id="contact" name="contact" 
                                            placeholder="Tel√©fono o email para seguimiento">
                                    </div>
                                </div>

                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="anonymous" name="anonymous">
                                    <label class="form-check-label" for="anonymous">
                                        Reportar de forma an√≥nima
                                    </label>
                                </div>

                                <div class="d-grid">
                                    <button type="submit" class="btn btn-danger btn-lg">
                                        <i class="fas fa-paper-plane me-2"></i>Enviar Reporte
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- seccion para anunciar reportes y estadisticas -->
            <section class="my-5">
                <h3 class="text-white mb-4">
                    <i class="fas fa-clock me-2"></i>Reportes Recientes
                </h3>
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Estos div son los reportes, estan estos predefinidos pero deben de cambiar 
                            en tiempo real segun lo que reporte un cliente  -->
                        <div class="alert alert-danger alert-item">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="alert-heading">üöó Accidente en Autopista General Ca√±as</h6>
                                    <p class="mb-1">Colisi√≥n m√∫ltiple reportada hace 15 minutos. Tr√°fico lento en ambos sentidos.</p>
                                    <small class="text-muted">Reportado por: Usuario123 - 15:30</small>
                                </div>
                                <span class="badge bg-danger">Alto</span>
                            </div>
                        </div>

                        <div class="alert alert-warning alert-item">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="alert-heading">üöß Construcci√≥n en Avenida Central</h6>
                                    <p class="mb-1">Obras de reparaci√≥n de alcantarillado. Carril derecho cerrado.</p>
                                    <small class="text-muted">Reportado por: CiudadanoActivo - 14:45</small>
                                </div>
                                <span class="badge bg-warning">Medio</span>
                            </div>
                        </div>

                        <div class="alert alert-info alert-item">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="alert-heading">üåßÔ∏è Lluvia intensa en Cartago</h6>
                                    <p class="mb-1">Condiciones clim√°ticas adversas. Reducir velocidad y mantener distancia.</p>
                                    <small class="text-muted">Reportado por: MeteoUsuario - 14:20</small>
                                </div>
                                <span class="badge bg-info">Bajo</span>
                            </div>
                        </div>
                    </div>
                    <!-- Este div igual esta predefinido pero los valores deben cambiar segun registros en tiempo real  -->
                    <div class="col-lg-4">
                        <div class="feature-card">
                            <h5 class="mb-3">
                                <i class="fas fa-chart-bar me-2 text-primary"></i>Estad√≠sticas Hoy
                            </h5>
                            <div class="row text-center">
                                <div class="col-6 mb-3">
                                    <div class="stats-counter">24</div>
                                    <small class="text-muted">Reportes</small>
                                </div>
                                <div class="col-6 mb-3">
                                    <div class="stats-counter">8</div>
                                    <small class="text-muted">Resueltos</small>
                                </div>
                                <div class="col-6">
                                    <div class="stats-counter">156</div>
                                    <small class="text-muted">Usuarios</small>
                                </div>
                                <div class="col-6">
                                    <div class="stats-counter">92%</div>
                                    <small class="text-muted">Precisi√≥n</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Boton flotante para reportes  -->
    <button class="btn-floating" data-bs-toggle="modal" data-bs-target="#quickReportModal" title="Reporte R√°pido">
        <i class="fas fa-plus fa-lg"></i>
    </button>

    <!-- esta ventana se abre al seleccionar el boton flotante -->
    <div class="modal fade" id="quickReportModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-tachometer-alt me-2"></i>Reporte R√°pido
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label class="form-label">¬øQu√© est√° pasando?</label>
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-outline-danger">üöó Accidente</button>
                                <button type="button" class="btn btn-outline-warning">üö¶ Embotellamiento</button>
                                <button type="button" class="btn btn-outline-info">üöß Construcci√≥n</button>
                                <button type="button" class="btn btn-outline-secondary">‚ö†Ô∏è Zona Peligrosa</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- esta ventana abre el login -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content custom-modal-content">
                <div class="modal-header custom-modal-header">
                    <h5 class="modal-title" id="loginModalLabel">Iniciar Sesi√≥n</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="loginFormActual">
                        <div class="mb-3">
                            <label for="emailInput" class="form-label">Correo Electr√≥nico</label>
                            <input type="email" class="form-control" id="emailInput" placeholder="correo@ejemplo.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="passwordInput" class="form-label">Contrase√±a</label>
                            <input type="password" class="form-control" id="passwordInput" placeholder="********" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Recordarme</label>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary custom-btn-primary">Ingresar</button>
                        </div>
                        <p class="text-center mt-3">
                            <a href="#" class="text-decoration-none custom-link">¬øOlvidaste tu contrase√±a?</a>
                        </p>
                        <hr class="my-4">
                        <p class="text-center">¬øNo tienes una cuenta? <a href="#" 
                            class="text-decoration-none custom-link" data-bs-toggle="modal" data-bs-target="#registerModal" data-bs-dismiss="modal">Reg√≠strate aqu√≠</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- esta ventana abre el registro de usuarios -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content custom-modal-content">
                <div class="modal-header custom-modal-header">
                    <h5 class="modal-title" id="registerModalLabel">Registrarse</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="registerFormActual">
                        <div class="mb-3">
                            <label for="registerNombreInput" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="registerNombreInput" placeholder="Nombre"
                                required>
                        </div>
                        <div class="mb-3">
                            <label for="registerApellidoInput" class="form-label">Apellido</label>
                            <input type="text" class="form-control" id="registerApellidoInput" placeholder="Apellido" required>
                        </div>
                        <div class="mb-3">
                            <label for="registerEmailInput" class="form-label">Correo Electr√≥nico</label>
                            <input type="email" class="form-control" id="registerEmailInput" placeholder="correo@ejemplo.com"
                                required>
                        </div>
                        <div class="mb-3">
                            <label for="registerPasswordInput" class="form-label">Contrase√±a</label>
                            <input type="password" class="form-control" id="registerPasswordInput"
                                placeholder="M√≠nimo 8 caracteres" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPasswordInput" class="form-label">Confirmar Contrase√±a</label>
                            <input type="password" class="form-control" id="confirmPasswordInput"
                                placeholder="Repite tu contrase√±a" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="termsCheck" required>
                            <label class="form-check-label" for="termsCheck">Acepto los <a href="#"
                                    class="custom-link">T√©rminos y Condiciones</a></label>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary custom-btn-primary">Crear Cuenta</button>
                        </div>
                        <hr class="my-4">
                        <p class="text-center">¬øYa tienes una cuenta? <a href="#" class="text-decoration-none custom-link"
                                data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Inicia Sesi√≥n
                                aqu√≠</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-road me-2"></i>V√≠asSeguras</h5>
                    <p class="text-muted">Construyendo carreteras m√°s seguras a trav√©s de la colaboraci√≥n comunitaria.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-muted">&copy; 2025 V√≠asSeguras. Todos los derechos reservados.</p>
                    <div>
                        <a href="#" class="text-light me-3"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="ubicacion.js"></script>
    <script src="login_registro.js"></script>
    

</body>
</html>